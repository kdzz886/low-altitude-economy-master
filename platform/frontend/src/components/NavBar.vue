<template>
  <el-menu mode="horizontal" router>
    <el-menu-item index="/">é¦–é¡µ</el-menu-item>
    <el-menu-item index="/demands">éœ€æ±‚å¤§å…</el-menu-item>
    <el-menu-item index="/dashboard">æ•°æ®å¤§å±</el-menu-item>

    <div style="margin-left:auto; margin-right:20px; display:flex; align-items:center; gap:8px;">
      <template v-if="!user.token">
        <el-button text @click="$router.push('/login')">ç™»å½•</el-button>
        <el-button text @click="$router.push('/register')">æ³¨å†Œ</el-button>
      </template>

      <template v-else>
        <el-button text @click="$router.push('/profile')">ğŸ‘¤ {{ user.username }}</el-button>
        <el-dropdown>
          <span style="cursor: pointer; margin-left: 6px;">âš™ï¸</span>
          <template #dropdown>
            <el-dropdown-menu>
              <el-dropdown-item @click="$router.push('/profile')">ä¸ªäººèµ„æ–™</el-dropdown-item>
              <el-dropdown-item divided @click="logout">é€€å‡ºç™»å½•</el-dropdown-item>
            </el-dropdown-menu>
          </template>
        </el-dropdown>
      </template>
    </div>
  </el-menu>
</template>

<script setup>
import { useUserStore } from '../store/user'
const user = useUserStore()

const logout = () => {
  user.logout()
  window.location.href = '/'
}
</script>
